<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		
		<div id="navigation_div">
			<h1>地址选择</h1>
		</div>
		<div id="address_choose_div">
			<ul id="province_ul" class="ul-basics">
				
			</ul>		
			<ul id="city_ul" class="ul-basics">
				
			</ul>		
			<ul id="county_ul" class="ul-basics">
				
			</ul>
		</div>
		
		<!-- 添加动效和node.js读取txt -->
		
		<script src="./datafile/TextFile.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			
			// node.js读取文件（革命尚未成功，同志仍需学习）
			
			// 读取js文件中数组
			// 将数据保存到对象数组中，无内容保存null
			var address_arr = new Array();
			address_arr = address_file.split('?');
			var address = [];
			for(dic of address_arr)										// 将数据保存到数组中
			{
				var add = {};											// 构造对象
				add.key = dic.split('*')[0];							// 添加属性
				add.prov = dic.split('*')[1];
				add.city = dic.split('*')[2];
				add.county = dic.split('*')[3];
				address.push(add);										// 将对象放入数组
			}
			
			var province_ul = document.getElementById("province_ul");
			var city_ul = document.getElementById("city_ul");
			var county_ul = document.getElementById("county_ul");
			for(dic of address)
			{
				if(dic.key % 10000 == 0)
				{
					creatLiProv(dic.key,dic.prov,province_ul);
				}
			}
			
			function creatLiProv(key,name,father_node)
			{
				var new_li = document.createElement('li');
				new_li.value = key;										// 设置livalue值
				new_li.onclick = function(){
					// 请除已有的内容放入新内容
					father_node.innerHTML = "";
					creatLi(this.value,name,father_node);
					for(dic of address)
					{
						if(dic.key % 100 == 0 && dic.key % 10000 != 0 && parseInt(dic.key / 10000) == parseInt(this.value / 10000) )
						{
							creatLiCity(dic.key,dic.city,city_ul);
						}
					}
				};
				var new_text = document.createTextNode(name);
				new_li.appendChild(new_text);
				father_node.appendChild(new_li);
			}
			
			function creatLiCity(key,name,father_node)
			{
				var new_li = document.createElement('li');
				new_li.value = key;										// 设置livalue值
				new_li.onclick = function(){
					// 请除已有的内容放入新内容
					father_node.innerHTML = "";
					creatLi(this.value,name,father_node);
					for(dic of address)
					{
						if(parseInt(dic.key / 100) == parseInt(new_li.value /100) && dic.key % 100 != 0)
						{
							creatLiCounty(dic.key,dic.county,county_ul);
						}
					}
				};
				var new_text = document.createTextNode(name);
				new_li.appendChild(new_text);
				father_node.appendChild(new_li);
			}
			
			function creatLiCounty(key,name,father_node)
			{
				var new_li = document.createElement('li');
				new_li.value = key;										// 设置livalue值				
				new_li.onclick = function(){
					// 请除已有的内容放入新内容
					father_node.innerHTML = "";
					creatLi(this.value,name,father_node);
				};
				var new_text = document.createTextNode(name);
				new_li.appendChild(new_text);
				father_node.appendChild(new_li);
			}
			
			function creatLi(key,name,father_node)
			{
				var new_li = document.createElement('li');
				new_li.value = key;										// 设置livalue值
				var new_text = document.createTextNode(name);
				new_li.appendChild(new_text);
				father_node.appendChild(new_li);
			}
			
			
		</script>
		
		
		<style type="text/css">
			
			*{
				margin: 0;
				padding: 0;
				/* 取消所有默认外边距和内边距 */
			}
			h1{
				text-align: center;
				opacity: 0.4;
				margin: 20px;
				padding: 20px;
			}
			#address_choose_div{
				width: 1000px;
				margin-left: 350px;
				margin-top: 50px;
			}
			.ul-basics{
				display: inline-flex;
				list-style-type: none;
				width: 300px;
			}
			.ul-basics li{												/* 更改产生的li */
				width: 250px;
				margin: 4px;
				border-radius: 8px;										/* 圆角 */
				padding: 8px;
				background-color: #3e3e3e;
				box-shadow: 0px 2px 4px 0px rgb(73,114,197,0.2);		/* 阴影 */
				color: white;
				cursor: pointer;										/* 光标改为小手 */
			}
			
			/* 按钮按下动效 */
			.ul-basics li:hover{
				background-color: #2e2e2e;
			}
			.ul-basics li:active{
				box-shadow:	7px 6px 28px 1px rgba(0, 0, 0, 0.24);				
				transform: translateY(2px);
			}
			
		</style>
		
	</body>
</html>
